# BT Web Studio 顶部工具栏设计规范

## 概述

本文档详细描述了 BT Web Studio 顶部工具栏的设计规范，基于三模式架构和 Groot 协议的核心功能需求，提供简洁高效的用户界面布局。

## 设计理念

### 核心原则
- **功能专注**: 专注于 Groot 协议能提供的核心功能
- **模式驱动**: 左侧模式切换保持不变，右侧功能区根据业务需求优化
- **简洁实用**: 移除非必要功能，保留核心工作流程
- **可扩展性**: 预留后续功能扩展空间

### 设计目标
- 简化用户操作流程
- 提升开发效率
- 减少界面复杂度
- 符合行为树开发工作流

## 工具栏布局架构

### 整体布局
```
[三模式切换区]          [功能特化区域]
[编辑][调试][回放] ... [文件][连接][日志][帮助]
```

### 布局分区

#### 左侧：模式切换区域 (保持不变)
位置固定在工具栏左侧，作为应用的核心导航。

#### 右侧：功能特化区域 (重新设计)
基于业务流程重新组织的功能模块。

## 详细功能规范

### 模式切换区域

#### 1. 编辑模式 (Composer Mode)
- **图标**: ✏️ 编辑图标
- **功能**: 行为树节点编辑和布局
- **关联功能**:
  - 节点库面板
  - 属性检查器
  - 画布编辑工具

#### 2. 调试模式 (Debug Mode)  
- **图标**: 🐛 调试图标
- **功能**: 实时调试和监控
- **关联功能**:
  - WebSocket 连接
  - 断点管理
  - 节点状态监控

#### 3. 回放模式 (Replay Mode)
- **图标**: ⏯️ 回放图标  
- **功能**: 历史数据回放分析
- **关联功能**:
  - 时间轴控制
  - 执行记录回放
  - 数据与节点状态监控

### 功能特化区域

#### 1. 文件 (File) 📁

##### 功能描述
管理行为树项目文件和 XML 导入导出。

##### 子功能模块
- **导入 XML**
  - 支持 BehaviorTree.CPP 标准格式
  - 文件格式验证
  - 错误提示和处理
  
- **导出 XML**
  - 生成标准 XML 格式
  - 保存到本地文件系统
  - 格式化输出选项

- **项目管理**
  - 新建项目
  - 保存当前项目
  - 项目文件管理

- **最近文件**
  - 显示最近打开的文件
  - 快速访问历史项目
  - 文件路径管理

##### 模式适配
- **编辑模式**: 主要使用导入导出和项目管理
- **调试模式**: 直接隐藏
- **回放模式**: 直接隐藏

#### 2. 连接 (Connection) 🔗

##### 功能描述
管理与后端调试器的 WebSocket 连接。

##### 子功能模块
- **连接控制**
  - 连接/断开后端调试器
  - 连接状态实时显示
  - 自动重连机制

- **连接状态显示**
  - 状态指示灯 (红/黄/绿)
  - 连接质量信息
  - 错误信息展示

- **连接配置**
  - IP 地址设置
  - 端口号配置
  - 连接超时设置
  - 协议版本选择

##### 模式适配
- **编辑模式**: 直接隐藏
- **调试模式**: 主要用于连接后端
- **回放模式**: 直接隐藏

#### 3. 加载 (Load) 📋

##### 功能描述
管理执行日志文件和 Groot 格式数据。

##### 子功能模块
- **日志文件管理**
  - 加载本地日志文件
  - 支持多种日志格式
  - 文件大小和格式检查

- **Groot 数据导入**
  - 导入 Groot 格式的执行记录
  - 数据格式验证
  - 兼容性检查

##### 模式适配
- **编辑模式**: 直接隐藏
- **调试模式**: 直接隐藏
- **回放模式**: 核心功能，加载回放数据

#### 4. 帮助 (Help) ❓

##### 功能描述
提供用户帮助和系统信息。

##### 子功能模块
- **文档访问**
  - 用户手册
  - API 参考文档
  - 最佳实践指南
  - 故障排除指南

- **快捷键说明**
  - 完整快捷键列表
  - 模式相关快捷键
  - 自定义快捷键设置

- **系统信息**
  - 应用版本信息
  - 系统兼容性
  - 许可证信息
  - 开发团队信息

##### 模式适配
- **所有模式**: 通用帮助功能

## 交互设计规范

### 视觉设计

#### 模式切换区域
- **布局**: 水平排列，左对齐
- **间距**: 按钮间距 8px
- **状态**: 当前模式高亮显示
- **动画**: 模式切换时平滑过渡

#### 功能特化区域
- **布局**: 水平排列，右对齐
- **间距**: Tab 间距 4px
- **状态**: 活跃 Tab 突出显示
- **响应式**: 支持小屏幕适配

### 交互行为

#### 点击行为
- **模式切换**: 立即切换模式，更新界面布局
- **功能 Tab**: 展开对应的功能面板或对话框
- **状态指示**: 显示详细状态信息

#### 切换行为

- **模式切换**: 隐藏无关按钮或者功能


## 技术实现规范

### 组件结构
```
TopBar/
├── ModeSwitch/
│   ├── ComposerMode
│   ├── DebugMode
│   └── ReplayMode
└── FunctionTabs/
    ├── FileTab
    ├── ConnectionTab
    ├── LoadTab
    └── HelpTab
```

### 状态管理
- **模式状态**: 全局状态，影响整个应用布局
- **连接状态**: 实时更新，影响相关功能可用性
- **文件状态**: 管理当前项目和文件操作
- **加载状态**: 管理日志加载和处理状态
