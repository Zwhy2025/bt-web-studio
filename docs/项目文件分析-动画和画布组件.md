# BT Web Studio 项目文件分析 - 动画和画布组件

本文档分析了项目中animations和canvas目录下的组件文件，包括动画效果和画布相关功能组件。

## 1. animations/mode-transitions.tsx

- **功能描述**: 模式切换动画组件，提供多种动画效果以提升用户体验。
  - 提供模式切换动画包装器(ModeTransitionWrapper)，支持淡入、滑动、缩放等动画效果
  - 提供加载动画组件(LoadingTransition)，在模式切换时显示加载状态
  - 提供面板展开/折叠动画(PanelTransition)，用于侧边栏等面板的展开折叠效果
  - 提供模式指示器动画(AnimatedModeIndicator)，为模式切换按钮添加动画效果
- **使用状态**: 活跃使用中
- **依赖关系**: 
  - 依赖状态管理([workflowModeState.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/store/workflowModeState.ts), [behavior-tree-store.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/store/behavior-tree-store.ts))
  - 依赖工具函数([utils.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/utils/utils.ts))

## 2. canvas/alignment-guides.tsx

- **功能描述**: 对齐辅助线组件，在画布上提供节点对齐的参考线、网格吸附指示器、橡皮框选择器等可视化辅助功能。
  - 提供对齐参考线(AlignmentGuides)显示功能
  - 提供网格吸附指示器(GridSnapIndicator)，显示节点吸附到网格的位置
  - 提供橡皮框选择器(SelectionBox)，用于多选节点时的可视化框选
  - 提供网格背景(GridBackground)，在画布上显示网格背景
  - 提供对齐工具栏(AlignmentToolbar)，显示对齐操作提示
- **使用状态**: 活跃使用中
- **依赖关系**: 
  - 依赖布局工具函数([alignment-utils.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/layout/alignment-utils.ts))

## 3. canvas/custom-nodes.tsx

- **功能描述**: 自定义节点组件的核心实现，通过统一的UnifiedNode组件，支持动作、条件、控制、装饰器、子树等不同类型的行为树节点渲染。
  - 提供统一的节点组件(UnifiedNode)，根据节点类型渲染不同的图标和样式
  - 支持节点状态显示(运行、成功、失败等)
  - 支持断点指示器显示
  - 特殊处理子树节点，支持展开/折叠显示子树参数和端口信息
  - 提供节点类型映射(nodeTypes)，将不同节点类型映射到对应的组件实现
- **使用状态**: 活跃使用中
- **依赖关系**: 
  - 依赖国际化Hook([use-i18n.ts](file:///home/zwhy/workspace/bt-web-studio/src/hooks/use-i18n.ts))
  - 依赖UI组件([button.tsx](file:///home/zwhy/workspace/bt-web-studio/src/components/ui/button.tsx), [accordion.tsx](file:///home/zwhy/workspace/bt-web-studio/src/components/ui/accordion.tsx), [badge.tsx](file:///home/zwhy/workspace/bt-web-studio/src/components/ui/badge.tsx))
  - 依赖状态管理([behavior-tree-store.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/store/behavior-tree-store.ts))
  - 依赖工具函数([utils.ts](file:///home/zwhy/workspace/bt-web-studio/src/core/utils/utils.ts))
  - 依赖ReactFlow库
  - 依赖Lucide React图标库