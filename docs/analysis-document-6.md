# BT Web Studio 项目文件分析文档（第6部分）

本文档总结了对BT Web Studio项目中`src/core/bt/`目录下文件的分析结果。

## 1. 行为树核心 (`/src/core/bt/`)

处理行为树（Behavior Tree）的解析、布局、状态管理等核心功能。

### 1.1 `behavior-tree-layout.ts`
- **功能描述**: 行为树布局算法，实现分层布局，确保父子节点之间有清晰的层级关系，用于画布的自动布局。
- **使用状态**: 活跃使用中。

### 1.2 `global-xml-processor.ts`
- **功能描述**: 全局XML处理器，采用单例模式提供统一的XML解析和生成接口，管理XML处理的全局状态。
- **使用状态**: 活跃使用中。

### 1.3 `node-state-manager.ts`
- **功能描述**: 节点状态管理器，用于跟踪和管理行为树中每个节点的执行状态（如IDLE, RUNNING, SUCCESS），支持历史记录和状态订阅。
- **使用状态**: 活跃使用中。

### 1.4 `subtree-mock-generator.ts`
- **功能描述**: 子树模拟事件生成器，当导入一个子树时，为其生成模拟的执行事件，方便调试和预览。
- **使用状态**: 活跃使用中。

### 1.5 `unified-behavior-tree-manager.ts`
- **功能描述**: 统一的行为树管理器，是BT核心功能的总调度者，负责管理树的解析、布局、运行时状态、子树管理及缓存机制。
- **使用状态**: 活跃使用中。

### 1.6 `xml-parser.ts`
- **功能描述**: XML解析器，负责将行为树的XML数据结构解析成应用内部所需的数据格式。
- **使用状态**: 活跃使用中。

### 1.7 `xml-utils.ts`
- **功能描述**: XML工具函数集合，提供XML解析和生成的辅助函数，包含节点类型映射和格式化等功能。
- **使用状态**: 活跃使用中。