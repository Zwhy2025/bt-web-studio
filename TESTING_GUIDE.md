# ğŸ§ª BT Web Studio æµ‹è¯•æŒ‡å—

## ğŸ“‹ é—®é¢˜è¯Šæ–­ç»“æœ

é€šè¿‡å¢å¼ºçš„æ—¥å¿—è®°å½•ï¼Œæˆ‘ä»¬ç¡®è®¤äº†åè®®è¿æ¥é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼š

### ğŸ” **æ ¸å¿ƒé—®é¢˜**
1. **åç«¯æ²¡æœ‰åŠ è½½è¡Œä¸ºæ ‘** - `getTree`è¿”å›ç©ºXMLï¼ˆ0å­—ç¬¦ï¼‰
2. **åè®®çŠ¶æ€é”™è¯¯** - å½“æ²¡æœ‰æ ‘åŠ è½½æ—¶ï¼Œ`getStatus`å’Œ`getBlackboard`è¯·æ±‚ä¼šå¤±è´¥
3. **é”™è¯¯ä¿¡æ¯**: `"Operation cannot be accomplished in current state"`

### ğŸ“Š **æ—¥å¿—åˆ†æ**
```
ğŸŒ³ Sending getTree request with ID: 1
âš ï¸  Empty XML received - backend may not have a tree loaded
ğŸ“Š Sending getStatus request with ID: 2  
âŒ getStatus failed: Operation cannot be accomplished in current state
ğŸ“‹ Sending getBlackboard request with ID: 3
âŒ getBlackboard failed: Operation cannot be accomplished in current state
```

## ğŸ› ï¸ **è§£å†³æ–¹æ¡ˆå’Œæµ‹è¯•æ–¹æ³•**

### **æ–¹æ¡ˆ1: ä½¿ç”¨æ¨¡æ‹Ÿåç«¯æµ‹è¯•**

#### 1. å¯åŠ¨æ¨¡æ‹Ÿåç«¯
```bash
# åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£
cd /home/zwhy/workspace/bt-web-studio
python tools/test_bt_backend.py
```

#### 2. å¯åŠ¨Webåº”ç”¨
```bash
# åœ¨ç¬¬äºŒä¸ªç»ˆç«¯çª—å£  
cd /home/zwhy/workspace/bt-web-studio
./tools/run.sh
```

#### 3. éªŒè¯è¿æ¥
- æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
  ```
  ğŸŒ³ Tree data received: 200+ characters
  âœ… Tree loaded successfully from backend
  ğŸ“Š Status update received
  ğŸ“‹ Blackboard update received
  ```

### **æ–¹æ¡ˆ2: ç›´æ¥åè®®æµ‹è¯•**

#### æµ‹è¯•å½“å‰åç«¯çŠ¶æ€
```bash
cd /home/zwhy/workspace/bt-web-studio
python tools/test_protocol.py 192.168.31.235 1667
```

#### æµ‹è¯•æ¨¡æ‹Ÿåç«¯
```bash
# å¯åŠ¨æ¨¡æ‹Ÿåç«¯å
python tools/test_protocol.py localhost 1667
```

### **æ–¹æ¡ˆ3: ä¿®å¤çœŸå®åç«¯**

å¦‚æœä½ æœ‰çœŸå®çš„BehaviorTree.CPPåº”ç”¨ç¨‹åºï¼Œç¡®ä¿ï¼š

1. **åŠ è½½è¡Œä¸ºæ ‘XMLæ–‡ä»¶**
   ```cpp
   // åœ¨C++ä»£ç ä¸­
   BT::BehaviorTreeFactory factory;
   auto tree = factory.createTreeFromFile("your_tree.xml");
   
   // åˆ›å»ºGroot2å‘å¸ƒå™¨
   BT::Groot2Publisher publisher(tree);
   ```

2. **å¯åŠ¨æ ‘æ‰§è¡Œ**
   ```cpp
   // å¼€å§‹æ‰§è¡Œè¡Œä¸ºæ ‘
   tree.tickRoot();
   ```

## ğŸ”§ **ä»£ç ä¿®å¤è¯´æ˜**

### **å·²ä¿®å¤çš„é—®é¢˜**
1. âœ… **å¢å¼ºæ—¥å¿—è®°å½•** - æ·»åŠ äº†è¯¦ç»†çš„emojiæ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•
2. âœ… **é”™è¯¯å¤„ç†æ”¹è¿›** - æ›´å¥½çš„åè®®é”™è¯¯æ£€æµ‹å’Œç”¨æˆ·åé¦ˆ
3. âœ… **çŠ¶æ€æ£€æŸ¥** - åœ¨è¯·æ±‚status/blackboardå‰éªŒè¯æ ‘æ˜¯å¦å·²åŠ è½½
4. âœ… **å‰ç«¯é‡å¤case** - ä¿®å¤äº†TypeScriptç¼–è¯‘é”™è¯¯

### **æ–°å¢åŠŸèƒ½**
1. ğŸ†• **æ™ºèƒ½è¯·æ±‚é¡ºåº** - å…ˆè·å–æ ‘ï¼Œç¡®è®¤åŠ è½½åå†è¯·æ±‚çŠ¶æ€
2. ğŸ†• **åè®®çŠ¶æ€æ£€æµ‹** - è¯†åˆ«"Operation cannot be accomplished"é”™è¯¯
3. ğŸ†• **æ¨¡æ‹Ÿåç«¯** - ç”¨äºæµ‹è¯•çš„å®Œæ•´åç«¯å®ç°
4. ğŸ†• **åè®®æµ‹è¯•å·¥å…·** - ç›´æ¥æµ‹è¯•ZMQè¿æ¥çš„å·¥å…·

## ğŸ“ˆ **æµ‹è¯•æ£€æŸ¥æ¸…å•**

### âœ… **åŸºæœ¬è¿æ¥æµ‹è¯•**
- [ ] WebSocketè¿æ¥æˆåŠŸ (`ws://localhost:8080`)
- [ ] ZMQè¿æ¥æˆåŠŸ (`tcp://192.168.31.235:1667`)
- [ ] åè®®æ¡æ‰‹æ­£å¸¸

### âœ… **æ•°æ®äº¤æ¢æµ‹è¯•**
- [ ] getTreeè¯·æ±‚æˆåŠŸ
- [ ] æ¥æ”¶åˆ°éç©ºXMLæ•°æ®
- [ ] getStatusè¯·æ±‚æˆåŠŸï¼ˆæ ‘åŠ è½½åï¼‰
- [ ] getBlackboardè¯·æ±‚æˆåŠŸï¼ˆæ ‘åŠ è½½åï¼‰

### âœ… **é”™è¯¯å¤„ç†æµ‹è¯•**
- [ ] ç©ºæ ‘çŠ¶æ€æ­£ç¡®æ£€æµ‹
- [ ] åè®®é”™è¯¯æ­£ç¡®æ˜¾ç¤º
- [ ] è¿æ¥æ–­å¼€æ­£ç¡®å¤„ç†

### âœ… **å‰ç«¯åŠŸèƒ½æµ‹è¯•**
- [ ] è¡Œä¸ºæ ‘å¯è§†åŒ–æ­£å¸¸
- [ ] èŠ‚ç‚¹çŠ¶æ€æ›´æ–°æ­£å¸¸
- [ ] é»‘æ¿æ•°æ®æ˜¾ç¤ºæ­£å¸¸
- [ ] è°ƒè¯•é¢æ¿åŠŸèƒ½æ­£å¸¸

## ğŸš€ **å¿«é€Ÿæµ‹è¯•å‘½ä»¤**

```bash
# 1. å¯åŠ¨æ¨¡æ‹Ÿåç«¯ï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰
python tools/test_bt_backend.py

# 2. å¯åŠ¨Webåº”ç”¨
./tools/run.sh

# 3. æµ‹è¯•åè®®è¿æ¥
python tools/test_protocol.py localhost 1667

# 4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f proxy_debug.log
```

## ğŸ” **æ•…éšœæ’é™¤**

### **å¸¸è§é—®é¢˜**

1. **"Empty tree XML"**
   - åŸå› ï¼šåç«¯æ²¡æœ‰åŠ è½½è¡Œä¸ºæ ‘
   - è§£å†³ï¼šä½¿ç”¨æ¨¡æ‹Ÿåç«¯æˆ–ç¡®ä¿çœŸå®åç«¯å·²åŠ è½½æ ‘

2. **"Operation cannot be accomplished in current state"**
   - åŸå› ï¼šåœ¨æ ‘æœªåŠ è½½æ—¶è¯·æ±‚çŠ¶æ€/é»‘æ¿
   - è§£å†³ï¼šå·²ä¿®å¤ - ç°åœ¨ä¼šå…ˆç¡®è®¤æ ‘åŠ è½½

3. **"WebSocket connection failed"**
   - åŸå› ï¼šä»£ç†æœåŠ¡å™¨æœªå¯åŠ¨
   - è§£å†³ï¼šæ£€æŸ¥`./tools/run.sh`æ˜¯å¦æ­£å¸¸å¯åŠ¨

4. **"ZMQ connection timeout"**
   - åŸå› ï¼šåç«¯æœåŠ¡å™¨ä¸å¯è¾¾
   - è§£å†³ï¼šæ£€æŸ¥IPåœ°å€å’Œç«¯å£é…ç½®

### **è°ƒè¯•æŠ€å·§**

1. **æŸ¥çœ‹å®æ—¶æ—¥å¿—**
   ```bash
   tail -f proxy_debug.log
   ```

2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   ```bash
   telnet 192.168.31.235 1667
   ```

3. **éªŒè¯ç«¯å£å ç”¨**
   ```bash
   netstat -tlnp | grep -E "(1667|1668|8080|5173)"
   ```

## ğŸ“ **ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®**

1. **æ·»åŠ æ ‘ç¼–è¾‘å™¨é›†æˆ** - å…è®¸åœ¨Webç•Œé¢ä¸­åˆ›å»ºå’Œç¼–è¾‘è¡Œä¸ºæ ‘
2. **å®æ—¶çŠ¶æ€å¯è§†åŒ–** - åœ¨èŠ‚ç‚¹ä¸Šæ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€
3. **æ–­ç‚¹è°ƒè¯•åŠŸèƒ½** - å®ç°çœŸæ­£çš„è°ƒè¯•å™¨åŠŸèƒ½
4. **æ€§èƒ½ç›‘æ§** - æ·»åŠ æ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½æŒ‡æ ‡
5. **äº‘ç«¯å­˜å‚¨** - æ”¯æŒè¡Œä¸ºæ ‘çš„äº‘ç«¯ä¿å­˜å’Œåˆ†äº«
